package com.reyurnible.network;import java.util.HashMap;import java.util.Map;import org.json.JSONObject;import android.util.Log;import com.android.volley.AuthFailureError;import com.android.volley.Request.Priority;import com.android.volley.Request;import com.android.volley.RequestQueue;import com.android.volley.Response;import com.android.volley.VolleyError;import com.android.volley.Request.Method;import com.android.volley.Response.Listener;//ストアの一覧を取得public class NetworkApiTask{	private NetworkTaskCallback callback;	private String requestFrom;		public NetworkApiTask(final NetworkTaskCallback callback,final String requestFrom) {		  this.callback = callback;		  this.requestFrom = requestFrom;	}	public void onRequest(RequestQueue mQueue,final int requestMethod,final Request.Priority requestPriority,final String url,final int callbackKey){		CustomJSONRequest request = new CustomJSONRequest(requestMethod, url, null,new Listener<JSONObject>() {			@Override			public void onResponse(JSONObject response) {				try{					callback.onSuccessNetworkTask(callbackKey, response);				}catch(IllegalStateException e){					e.printStackTrace();				}			}		},		new Response.ErrorListener() {			@Override 			public void onErrorResponse(VolleyError error) {				try{					Log.d("NetworkApiTask",error.toString());					callback.onFailedNetworkTask(callbackKey);				}catch(IllegalStateException e){					e.printStackTrace();				}			}		}){			@Override			public Map<String, String> getHeaders() throws AuthFailureError {				Map<String, String> headers = super.getHeaders();				// Add BASIC AUTH HEADER				Map<String, String> newHeaders = new HashMap<String, String>();				/*				newHeaders.putAll(headers);				newHeaders.put("x-uuid", uuid);				*/				return newHeaders;			};		};		request.setPriority(requestPriority);		request.setTag(requestFrom);		mQueue.add(request);	}}